<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="~{fragments/header :: head}"></div>
    <title> Create new book </title>
</head>

<body>
    <nav th:replace="~{fragments/navbar :: navbar('books')}"></nav>
    <div class="container">
        <h1>Book</h1>
        <hr />

        <form id="book-form" th:object="${book}" th:action="@{/books/create}" method="post">
           
            <div class="row">
                <!-- Dati book-->
                <div class="col-8">
                    <div class="row">
                        <div class="col-12">
                            <label class="form-label">Title</label>
                            <input type="text" class="form-control" id="title" th:field="*{title}"
                                th:errorClass="is-invalid">

                            <ul th:if="${#fields.hasErrors('title')}">
                                <li th:each="err : ${#fields.errors('title')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Author</label>
                            <input type="text" class="form-control" id="author" th:field="*{author}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('author')}">
                                <li th:each="err : ${#fields.errors('author')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Publisher</label>
                            <input type="text" class="form-control" id="publisher" th:field="*{publisher}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('publisher')}">
                                <li th:each="err : ${#fields.errors('publisher')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Year</label>
                            <input type="text" class="form-control" id="year" th:field="*{year}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('year')}">
                                <li th:each="err : ${#fields.errors('year')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Copies</label>
                            <input type="text" class="form-control" id="copies" th:field="*{numCopy}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('numCopy')}">
                                <li th:each="err : ${#fields.errors('numCopy')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">ISBN</label>
                            <input type="text" class="form-control" id="isbn" th:field="*{isbn}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('isbn')}">
                                <li th:each="err : ${#fields.errors('isbn')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Synopsis</label>
                            <textarea type="text" class="form-control" id="synopsis" th:field="*{synopsis}"
                                th:errorClass="is-invalid" rows="6">
                                </textarea>
                        </div>

                        <div class="col-12">
                            <label class="form-label">Number of pages</label>
                            <input type="text" class="form-control" id="numPages" th:field="*{numPages}"
                                th:errorClass="is-invalid">
                                
                            <ul th:if="${#fields.hasErrors('numPages')}">
                                <li th:each="err : ${#fields.errors('numPages')}" class="text-danger" th:text="${err}"></li>
                            </ul>
                        </div>
                        <!-- FINE CAMPI -->


                        <div class="col-12">
                            <button class="btn btn-primary" type="submit"><i class="fas fa-check"></i> Save</button>
                            <a class="btn btn-danger" th:href="@{/books}"> <i class="fas fa-times"></i> Cancel</a>
                        </div>
                    </div>
                </div>
                <!-- categories -->
                 <div class="col-4">
                    <h4>Categories</h4>
                    <div class="form-check" th:each="cat : ${categoryList}">
                        <input class="form-check-input" type="checkbox" th:id="${cat.id}" th:value="${cat.id}" th:field="*{categories}"> 
                        <label class="form-check-label" th:for="${cat.id}" th:text="${cat.category}"></label>
                    </div>
                 </div>
            </div>
        </form>

    </div>
    <div th:replace="~{fragments/header :: bootstrapScript}"></div>
</body>

</html>